<div class="card">
    <!-- Product Image -->
    <div class="background-gradient">
        <div class="content-gradient">
            <img class="card-img-top" src="{{ product_data.product.image }}" alt="{{ product_data.product.name }}">
        </div>
    </div>

    <!-- Card Body -->
    <div class="card-body">
        <!-- Product Name -->
        <h5 class="card-title mx-auto">
            <a href="{% url 'product_detail' slug=product_data.product.slug %}">{{ product_data.product.name }}</a>
        </h5>

        <!-- Review Stars -->
        <div class="review-stars">
            {% for star in total_review %}
                {% if star < product_data.product.rating %}
                    <i class="star filled">★</i>
                {% elif star < 5 %}
                    <i class="star">★</i>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Product Details -->
        <p class="card-text mx-auto">{{ product_data.product.description }}</p>

        <!-- Size and Quantity Selectors -->
        <div class="row card-row">
            <!-- Size Selector -->
            <div class="col-6 mx-auto">
                <label for="size-select-{{ product_data.product.id }}">Size</label>
                <select id="size-select-{{ product_data.product.id }}" class="form-select size select-dropdown">
                    {% for size, data in product_data.stock_by_size.items %}
                        <option value="{{ size }}" 
                            data-price="{{ data.price }}" 
                            data-stock="{{ data.stock }}"{% if size == product_data.variant_size %} selected{% endif %}>
                            {{ size }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Quantity Selector -->
            <div class="col-6 mx-auto">
                <label for="quantity-select-{{ product_data.product.id }}">Quantity</label>
                <input id="quantity-select-{{ product_data.product.id }}" type="number" class="form-control quantity" min="1" value="1">
            </div>
        </div>

        <!-- Price or Stock Status -->
        <h5 class="card-subtitle mt-3">
            {% if product_data.variant_stock == 0 %}
                <span id="price-display-{{ product_data.product.id }}" class="text-danger"><strong>Out of Stock</strong></span>
            {% else %}
                <span id="price-display-{{ product_data.product.id }}"><strong>$<span>{{ product_data.variant_price }}</span> <span>each</span></strong></span>
            {% endif %}
        </h5>

        <!-- Buy Button -->
        <a id="buy-button-{{ product_data.product.id }}" 
            href="{{ product_data.product.get_buy_url }}" 
            class="btn btn-secondary btn-sm {% if product_data.variant_stock == 0 %}disabled{% endif %}" 
            {% if product_data.variant_stock == 0 %}disabled{% endif %}>
            Buy
        </a>
    </div>
</div>
