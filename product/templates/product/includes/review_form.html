{% load crispy_forms_tags %}

{% if view == 'detail' %}
<div class="mt-3 card-body rating-container mt-5">
    {% if not is_admin %}
        <form method="POST" class="rating-form">
            {% csrf_token %}
            <!-- Clickable Star Rating -->
            <div id="star-rating" class="mt-3 mb-3 centered-element">
                <!-- Hidden Rating Input (not displayed) -->
                <div class="sr-only">
                    <label for="id_rating" class="sr-only">Rating</label>
                    {{ review_form.rating }}
                    <small id="id_rating_helptext">
                        Select your rating from 0 to 5.
                    </small>
                </div>
                {% for star in max_review %}
                    <svg class="star icon icon-coffee-bean {% if star < rating %}filled{% endif %}" data-value="{{ forloop.counter }}"><use xlink:href="#icon-coffee-bean"></use></svg>
                {% endfor %}
            </div>

            <div class="row">
                <div class="col-9">
                    {{ review_form.comment|as_crispy_field }}
                </div>
                <div class="col-3">
                    <button type="submit" class="btn btn-sm btn-primary col btn-review">
                        <i class="fa-solid fa-paper-plane"></i>
                        <span class="sr-only">Send</span>
                    </button>
                </div>
            </div>
        </form>
    {% endif %}
</div>
{% endif %}
